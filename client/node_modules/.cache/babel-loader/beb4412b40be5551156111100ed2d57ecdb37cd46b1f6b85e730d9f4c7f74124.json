{"ast":null,"code":"var _jsxFileName = \"/Users/priyamshah/Documents/ITCS 6112 - Software Systems Design & Implementation/vital_tech/client/src/components/Dashboard/Dashboard.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\n// import React, { useState, useEffect } from 'react';\n// import axios from 'axios';\n\n// function Dashboard() {\n//     const [images, setImages] = useState([]);\n//     const [file, setFile] = useState(null);\n\n//     useEffect(() => {\n//         fetchImages();\n//     }, []);\n\n//     const fetchImages = async () => {\n//         const { data } = await axios.get('http://localhost:5001/api/user/getImages');\n//         setImages(data);\n//     };\n\n//     const handleFileChange = (e) => {\n//         setFile(e.target.files[0]);\n//     };\n\n//     const handleUpload = async () => {\n//         const formData = new FormData();\n//         formData.append('file', file);\n//         formData.append('patientId', '661f1c830c9e0aaacf0b5bce');\n\n//         try {\n//             await axios.post('http://localhost:5001/api/user/upload', formData, {\n//                 headers: {\n//                     'Content-Type': 'multipart/form-data'\n//                 }\n//             });\n//             fetchImages(); // Refresh the list after upload\n//         } catch (error) {\n//             console.error('Error uploading the image:', error.response);\n//         }\n//     };\n\n//     const handleCommentSubmit = async (imageId, comment) => {\n//         try {\n//             await axios.post(`http://localhost:5001/api/user/images/${imageId}/comments`, { text: comment, userId: '661f1c830c9e0aaacf0b5bce'});\n//             fetchImages(); // Refresh the comments\n//         } catch (error) {\n//             console.error('Error posting comment:', error.response);\n//         }\n//     };\n\n//     return (\n//         <div>\n//             <h1>Dashboard</h1>\n//             <input type=\"file\" onChange={handleFileChange} id=\"image\" name='image' />\n//             <button onClick={handleUpload}>Upload Image</button>\n\n//             {images.map((image) => (\n//                 <div key={image._id}>\n//                     <img src={image.base64Image} alt=\"Uploaded B64\" />\n//                     {image.comments.map((comment) => (\n//                         <p key={comment._id}>{comment.body}</p>\n//                     ))}\n//                     <CommentForm imageId={image._id} onCommentSubmit={handleCommentSubmit} />\n//                 </div>\n//             ))}\n//         </div>\n//     );\n// }\n\n// function CommentForm({ imageId, onCommentSubmit }) {\n//     const [comment, setComment] = useState('');\n\n//     const handleSubmit = (e) => {\n//         e.preventDefault();\n//         onCommentSubmit(imageId, comment);\n//         setComment('');\n//     };\n\n//     return (\n//         <form onSubmit={handleSubmit}>\n//             <input type=\"text\" value={comment} onChange={(e) => setComment(e.target.value)} />\n//             <button type=\"submit\">Add Comment</button>\n//         </form>\n//     );\n// }\n\n// export default Dashboard;\n\n// import React, { useState, useEffect } from 'react';\n// import axios from 'axios';\n\n// function Dashboard() {\n//     const [images, setImages] = useState([]);\n//     const [file, setFile] = useState(null);\n//     const [isLoading, setIsLoading] = useState(false);\n//     const [error, setError] = useState('');\n\n//     useEffect(() => {\n//         fetchImages();\n//     }, []);\n\n//     const fetchImages = async () => {\n//         setIsLoading(true);\n//         try {\n//             const { data } = await axios.get('http://localhost:5001/api/user/getImages');\n//             setImages(data);\n//             setError('');\n//         } catch (error) {\n//             setError('Failed to fetch images');\n//             console.error('Fetch images error:', error.response);\n//         }\n//         setIsLoading(false);\n//     };\n\n//     const handleFileChange = (e) => {\n//         setFile(e.target.files[0]);\n//     };\n\n//     const handleUpload = async () => {\n//         const formData = new FormData();\n//         formData.append('file', file);\n//         formData.append('patientId', '661f1c830c9e0aaacf0b5bce');\n\n//         setIsLoading(true);\n//         try {\n//             await axios.post('http://localhost:5001/api/user/upload', formData, {\n//                 headers: {\n//                     'Content-Type': 'multipart/form-data'\n//                 }\n//             });\n//             // await axios.post('http://localhost:5000/', formData, {\n//             //     headers: {\n//             //         'Content-Type': 'multipart/form-data'\n//             //     }\n//             // });\n//             formData.append('image', file);\n\n//             fetch('http://127.0.0.1:5000/predict', {  // Ensure this URL matches your Flask server's URL\n//                 method: 'POST',\n//                 body: formData  // Sending the image as FormData\n//             })\n//             .then(response => {\n//                 if (!response.ok) {\n//                     throw new Error('Network response was not ok: ' + response.statusText);\n//                 }\n//                 return response.json();\n//             })\n//             .then(data => {\n//                 if (data.error) {\n//                     throw new Error('Error from server: ' + data.error);\n//                 }\n//                 console.log('Prediction: ' + data.prediction);\n//             })\n//             .catch((error) => {\n//                 console.error('Error:', error);\n//                 console.log('Error: Could not retrieve prediction. ' + error.message);\n//             });\n//             fetchImages();\n//             setError('');\n//         } catch (error) {\n//             setError('Error uploading the image');\n//             console.error('Upload image error:', error.response);\n//         }\n//         setIsLoading(false);\n//     };\n\n//     const handleCommentSubmit = async (imageId, comment) => {\n//         setIsLoading(true);\n//         try {\n//             await axios.post(`http://localhost:5001/api/user/images/${imageId}/comments`, { text: comment, userId: '661f1c830c9e0aaacf0b5bce'});\n//             fetchImages();\n//             setError('');\n//         } catch (error) {\n//             setError('Error posting comment');\n//             console.error('Post comment error:', error.response);\n//         }\n//         setIsLoading(false);\n//     };\n\n//     if (isLoading) return <p>Loading...</p>;\n//     if (error) return <p>{error}</p>;\n\n//     return (\n//         <div style={{ margin: '20px' }}>\n//             <h1 style={{ textAlign: 'center' }}>Dashboard</h1>\n//             <input type=\"file\" onChange={handleFileChange} id=\"image\" name='image' />\n//             <button onClick={handleUpload} style={{ margin: '10px' }}>Upload Image</button>\n\n//             {images.map((image) => (\n//                 <div key={image._id} style={{ border: '1px solid #ccc', padding: '20px', marginBottom: '10px' }}>\n//                     <img src={image.base64Image} alt=\"Uploaded\" style={{ maxWidth: '100%', marginBottom: '10px' }} />\n//                     <div>\n//                         <h3>Comments</h3>\n//                         {image.comments.map((comment) => (\n//                             <p key={comment._id} style={{ backgroundColor: '#f8f8f8', padding: '8px', borderRadius: '5px', margin: '5px 0' }}>\n//                                 {comment.body}\n//                             </p>\n//                         ))}\n//                         <CommentForm imageId={image._id} onCommentSubmit={handleCommentSubmit} />\n//                     </div>\n//                 </div>\n//             ))}\n//         </div>\n//     );\n// }\n\n// function CommentForm({ imageId, onCommentSubmit }) {\n//     const [comment, setComment] = useState('');\n\n//     const handleSubmit = (e) => {\n//         e.preventDefault();\n//         onCommentSubmit(imageId, comment);\n//         setComment('');\n//     };\n\n//     return (\n//         <form onSubmit={handleSubmit} style={{ display: 'flex', marginTop: '10px' }}>\n//             <input type=\"text\" value={comment} onChange={(e) => setComment(e.target.value)} placeholder=\"Add a comment...\" style={{ flexGrow: 1, marginRight: '5px' }} />\n//             <button type=\"submit\">Post</button>\n//         </form>\n//     );\n// }\n\n// export default Dashboard;\n\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport Layout from '../Layout/Layout';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Dashboard() {\n  _s();\n  const [images, setImages] = useState([]);\n  const [file, setFile] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n  // const [error, setError] = useState('');\n\n  useEffect(() => {\n    fetchImages();\n  }, []);\n  const fetchImages = async () => {\n    setIsLoading(true);\n    try {\n      const {\n        data\n      } = await axios.get('http://localhost:5001/api/user/getImages');\n      setImages(data);\n      // setError('');\n    } catch (error) {\n      // setError('Failed to fetch images');\n      console.error('Fetch images error:', error.response);\n    }\n    setIsLoading(false);\n  };\n  const handleFileChange = e => {\n    setFile(e.target.files[0]);\n  };\n  const handleUpload = async () => {\n    const formData = new FormData();\n    formData.append('file', file);\n    formData.append('patientId', '661f1c830c9e0aaacf0b5bce');\n\n    // setIsLoading(true);\n    try {\n      await axios.post('http://localhost:5001/api/user/upload', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      formData.append('image', file);\n      fetch('http://127.0.0.1:5000/predict', {\n        // Ensure this URL matches your Flask server's URL\n        method: 'POST',\n        body: formData // Sending the image as FormData\n      }).then(response => {\n        if (!response.ok) {\n          throw new Error('Network response was not ok: ' + response.statusText);\n        }\n        return response.json();\n      }).then(data => {\n        if (data.error) {\n          throw new Error('Error from server: ' + data.error);\n        }\n        // console.log('Prediction: ' + data.prediction);\n        alert(`Predicted: ${data.prediction}`);\n      }).catch(error => {\n        console.error('Error:', error);\n        console.log('Error: Could not retrieve prediction. ' + error.message);\n      });\n      fetchImages();\n      // setError('');\n    } catch (error) {\n      // setError('Error uploading the image');\n      console.error('Upload image error:', error.response);\n    }\n    // setIsLoading(false);\n  };\n  const handleAnalyze = async image => {\n    if (!image.base64Image) {\n      alert('Please select a file and convert it to base64 first!');\n      return;\n    }\n    try {\n      const response = await fetch('http://127.0.0.1:5000/predict', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          image: image.base64Image\n        })\n      });\n      const result = await response.json();\n      // console.log(result);\n      alert(`Predicted: ${result.prediction}`);\n    } catch (error) {\n      console.error('Error:', error);\n    }\n  };\n  const handleCommentSubmit = async (imageId, comment) => {\n    // setIsLoading(true);\n    try {\n      await axios.post(`http://localhost:5001/api/user/images/${imageId}/comments`, {\n        text: comment,\n        userId: '661f1c830c9e0aaacf0b5bce'\n      });\n      fetchImages();\n      // setError('');\n    } catch (error) {\n      // setError('Error posting comment');\n      console.error('Post comment error:', error.response);\n    }\n    // setIsLoading(false);\n  };\n\n  // if (isLoading) return <p>Loading...</p>;\n  // if (error) return <p>{error}</p>;\n\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"lay\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        style: {\n          textAlign: 'center'\n        },\n        children: \"Dashboard\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        onChange: handleFileChange,\n        id: \"image\",\n        name: \"image\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 342,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleUpload,\n        style: {\n          margin: '10px'\n        },\n        children: \"Upload Image\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 13\n      }, this), isLoading && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 344,\n        columnNumber: 27\n      }, this), images.map(image => /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          border: '5px solid #ccc',\n          padding: '20px',\n          marginBottom: '10px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: image.base64Image,\n          alt: \"Uploaded\",\n          style: {\n            width: '500px',\n            height: '500px',\n            marginBottom: '10px',\n            border: '2px solid black'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleAnalyze(image),\n          style: {\n            margin: '10px'\n          },\n          children: \"Analyze Image\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            border: '2px solid black'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            style: {\n              marginLeft: '700px'\n            },\n            children: \"Comments\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 350,\n            columnNumber: 25\n          }, this), image.comments.map(comment => /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              backgroundColor: '#f8f8f8',\n              marginLeft: '700px',\n              borderRadius: '5px',\n              minWidth: '100px',\n              maxWidth: '500px'\n            },\n            children: comment.body\n          }, comment._id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 352,\n            columnNumber: 29\n          }, this)), /*#__PURE__*/_jsxDEV(CommentForm, {\n            imageId: image._id,\n            onCommentSubmit: handleCommentSubmit\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 356,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 21\n        }, this)]\n      }, image._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 346,\n        columnNumber: 17\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 340,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 339,\n    columnNumber: 9\n  }, this);\n}\n_s(Dashboard, \"Jtc+HaThVHq3/CEELR6OtEJhyEg=\");\n_c = Dashboard;\nfunction CommentForm({\n  imageId,\n  onCommentSubmit\n}) {\n  _s2();\n  const [comment, setComment] = useState('');\n  const handleSubmit = e => {\n    e.preventDefault();\n    onCommentSubmit(imageId, comment);\n    setComment('');\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      style: {\n        display: 'flex',\n        marginTop: '10px',\n        width: '500px',\n        border: '2px solid black'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: comment,\n        onChange: e => setComment(e.target.value),\n        placeholder: \"Add a comment...\",\n        style: {\n          flexGrow: 1,\n          marginRight: '5px',\n          maxLength: '100'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 377,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Post\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 378,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 376,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 375,\n    columnNumber: 9\n  }, this);\n}\n_s2(CommentForm, \"vhAvzpEN661Y5K0yhbG0Td/NMg4=\");\n_c2 = CommentForm;\nexport default Dashboard;\nvar _c, _c2;\n$RefreshReg$(_c, \"Dashboard\");\n$RefreshReg$(_c2, \"CommentForm\");","map":{"version":3,"names":["React","useState","useEffect","axios","Layout","jsxDEV","_jsxDEV","Dashboard","_s","images","setImages","file","setFile","isLoading","setIsLoading","fetchImages","data","get","error","console","response","handleFileChange","e","target","files","handleUpload","formData","FormData","append","post","headers","fetch","method","body","then","ok","Error","statusText","json","alert","prediction","catch","log","message","handleAnalyze","image","base64Image","JSON","stringify","result","handleCommentSubmit","imageId","comment","text","userId","children","className","style","textAlign","fileName","_jsxFileName","lineNumber","columnNumber","type","onChange","id","name","onClick","margin","map","border","padding","marginBottom","src","alt","width","height","marginLeft","comments","backgroundColor","borderRadius","minWidth","maxWidth","_id","CommentForm","onCommentSubmit","_c","_s2","setComment","handleSubmit","preventDefault","onSubmit","display","marginTop","value","placeholder","flexGrow","marginRight","maxLength","_c2","$RefreshReg$"],"sources":["/Users/priyamshah/Documents/ITCS 6112 - Software Systems Design & Implementation/vital_tech/client/src/components/Dashboard/Dashboard.js"],"sourcesContent":["// import React, { useState, useEffect } from 'react';\n// import axios from 'axios';\n\n// function Dashboard() {\n//     const [images, setImages] = useState([]);\n//     const [file, setFile] = useState(null);\n\n//     useEffect(() => {\n//         fetchImages();\n//     }, []);\n\n//     const fetchImages = async () => {\n//         const { data } = await axios.get('http://localhost:5001/api/user/getImages');\n//         setImages(data);\n//     };\n\n//     const handleFileChange = (e) => {\n//         setFile(e.target.files[0]);\n//     };\n\n//     const handleUpload = async () => {\n//         const formData = new FormData();\n//         formData.append('file', file);\n//         formData.append('patientId', '661f1c830c9e0aaacf0b5bce');\n\n//         try {\n//             await axios.post('http://localhost:5001/api/user/upload', formData, {\n//                 headers: {\n//                     'Content-Type': 'multipart/form-data'\n//                 }\n//             });\n//             fetchImages(); // Refresh the list after upload\n//         } catch (error) {\n//             console.error('Error uploading the image:', error.response);\n//         }\n//     };\n\n//     const handleCommentSubmit = async (imageId, comment) => {\n//         try {\n//             await axios.post(`http://localhost:5001/api/user/images/${imageId}/comments`, { text: comment, userId: '661f1c830c9e0aaacf0b5bce'});\n//             fetchImages(); // Refresh the comments\n//         } catch (error) {\n//             console.error('Error posting comment:', error.response);\n//         }\n//     };\n\n//     return (\n//         <div>\n//             <h1>Dashboard</h1>\n//             <input type=\"file\" onChange={handleFileChange} id=\"image\" name='image' />\n//             <button onClick={handleUpload}>Upload Image</button>\n\n//             {images.map((image) => (\n//                 <div key={image._id}>\n//                     <img src={image.base64Image} alt=\"Uploaded B64\" />\n//                     {image.comments.map((comment) => (\n//                         <p key={comment._id}>{comment.body}</p>\n//                     ))}\n//                     <CommentForm imageId={image._id} onCommentSubmit={handleCommentSubmit} />\n//                 </div>\n//             ))}\n//         </div>\n//     );\n// }\n\n// function CommentForm({ imageId, onCommentSubmit }) {\n//     const [comment, setComment] = useState('');\n\n//     const handleSubmit = (e) => {\n//         e.preventDefault();\n//         onCommentSubmit(imageId, comment);\n//         setComment('');\n//     };\n\n//     return (\n//         <form onSubmit={handleSubmit}>\n//             <input type=\"text\" value={comment} onChange={(e) => setComment(e.target.value)} />\n//             <button type=\"submit\">Add Comment</button>\n//         </form>\n//     );\n// }\n\n// export default Dashboard;\n\n// import React, { useState, useEffect } from 'react';\n// import axios from 'axios';\n\n// function Dashboard() {\n//     const [images, setImages] = useState([]);\n//     const [file, setFile] = useState(null);\n//     const [isLoading, setIsLoading] = useState(false);\n//     const [error, setError] = useState('');\n\n//     useEffect(() => {\n//         fetchImages();\n//     }, []);\n\n//     const fetchImages = async () => {\n//         setIsLoading(true);\n//         try {\n//             const { data } = await axios.get('http://localhost:5001/api/user/getImages');\n//             setImages(data);\n//             setError('');\n//         } catch (error) {\n//             setError('Failed to fetch images');\n//             console.error('Fetch images error:', error.response);\n//         }\n//         setIsLoading(false);\n//     };\n\n//     const handleFileChange = (e) => {\n//         setFile(e.target.files[0]);\n//     };\n\n//     const handleUpload = async () => {\n//         const formData = new FormData();\n//         formData.append('file', file);\n//         formData.append('patientId', '661f1c830c9e0aaacf0b5bce');\n\n//         setIsLoading(true);\n//         try {\n//             await axios.post('http://localhost:5001/api/user/upload', formData, {\n//                 headers: {\n//                     'Content-Type': 'multipart/form-data'\n//                 }\n//             });\n//             // await axios.post('http://localhost:5000/', formData, {\n//             //     headers: {\n//             //         'Content-Type': 'multipart/form-data'\n//             //     }\n//             // });\n//             formData.append('image', file);\n        \n//             fetch('http://127.0.0.1:5000/predict', {  // Ensure this URL matches your Flask server's URL\n//                 method: 'POST',\n//                 body: formData  // Sending the image as FormData\n//             })\n//             .then(response => {\n//                 if (!response.ok) {\n//                     throw new Error('Network response was not ok: ' + response.statusText);\n//                 }\n//                 return response.json();\n//             })\n//             .then(data => {\n//                 if (data.error) {\n//                     throw new Error('Error from server: ' + data.error);\n//                 }\n//                 console.log('Prediction: ' + data.prediction);\n//             })\n//             .catch((error) => {\n//                 console.error('Error:', error);\n//                 console.log('Error: Could not retrieve prediction. ' + error.message);\n//             });\n//             fetchImages();\n//             setError('');\n//         } catch (error) {\n//             setError('Error uploading the image');\n//             console.error('Upload image error:', error.response);\n//         }\n//         setIsLoading(false);\n//     };\n\n//     const handleCommentSubmit = async (imageId, comment) => {\n//         setIsLoading(true);\n//         try {\n//             await axios.post(`http://localhost:5001/api/user/images/${imageId}/comments`, { text: comment, userId: '661f1c830c9e0aaacf0b5bce'});\n//             fetchImages();\n//             setError('');\n//         } catch (error) {\n//             setError('Error posting comment');\n//             console.error('Post comment error:', error.response);\n//         }\n//         setIsLoading(false);\n//     };\n\n//     if (isLoading) return <p>Loading...</p>;\n//     if (error) return <p>{error}</p>;\n\n//     return (\n//         <div style={{ margin: '20px' }}>\n//             <h1 style={{ textAlign: 'center' }}>Dashboard</h1>\n//             <input type=\"file\" onChange={handleFileChange} id=\"image\" name='image' />\n//             <button onClick={handleUpload} style={{ margin: '10px' }}>Upload Image</button>\n\n//             {images.map((image) => (\n//                 <div key={image._id} style={{ border: '1px solid #ccc', padding: '20px', marginBottom: '10px' }}>\n//                     <img src={image.base64Image} alt=\"Uploaded\" style={{ maxWidth: '100%', marginBottom: '10px' }} />\n//                     <div>\n//                         <h3>Comments</h3>\n//                         {image.comments.map((comment) => (\n//                             <p key={comment._id} style={{ backgroundColor: '#f8f8f8', padding: '8px', borderRadius: '5px', margin: '5px 0' }}>\n//                                 {comment.body}\n//                             </p>\n//                         ))}\n//                         <CommentForm imageId={image._id} onCommentSubmit={handleCommentSubmit} />\n//                     </div>\n//                 </div>\n//             ))}\n//         </div>\n//     );\n// }\n\n// function CommentForm({ imageId, onCommentSubmit }) {\n//     const [comment, setComment] = useState('');\n\n//     const handleSubmit = (e) => {\n//         e.preventDefault();\n//         onCommentSubmit(imageId, comment);\n//         setComment('');\n//     };\n\n//     return (\n//         <form onSubmit={handleSubmit} style={{ display: 'flex', marginTop: '10px' }}>\n//             <input type=\"text\" value={comment} onChange={(e) => setComment(e.target.value)} placeholder=\"Add a comment...\" style={{ flexGrow: 1, marginRight: '5px' }} />\n//             <button type=\"submit\">Post</button>\n//         </form>\n//     );\n// }\n\n// export default Dashboard;\n\n\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport Layout from '../Layout/Layout';\n\nfunction Dashboard() {\n    const [images, setImages] = useState([]);\n    const [file, setFile] = useState(null);\n    const [isLoading, setIsLoading] = useState(false);\n    // const [error, setError] = useState('');\n\n    useEffect(() => {\n        fetchImages();\n    }, []);\n\n    const fetchImages = async () => {\n        setIsLoading(true);\n        try {\n            const { data } = await axios.get('http://localhost:5001/api/user/getImages');\n            setImages(data);\n            // setError('');\n        } catch (error) {\n            // setError('Failed to fetch images');\n            console.error('Fetch images error:', error.response);\n        }\n        setIsLoading(false);\n    };\n\n    const handleFileChange = (e) => {\n        setFile(e.target.files[0]);\n    };\n\n    const handleUpload = async () => {\n        const formData = new FormData();\n        formData.append('file', file);\n        formData.append('patientId', '661f1c830c9e0aaacf0b5bce');\n\n        // setIsLoading(true);\n        try {\n            await axios.post('http://localhost:5001/api/user/upload', formData, {\n                headers: {\n                    'Content-Type': 'multipart/form-data'\n                }\n            });\n            formData.append('image', file);\n        \n            fetch('http://127.0.0.1:5000/predict', {  // Ensure this URL matches your Flask server's URL\n                method: 'POST',\n                body: formData  // Sending the image as FormData\n            })\n            .then(response => {\n                if (!response.ok) {\n                    throw new Error('Network response was not ok: ' + response.statusText);\n                }\n                return response.json();\n            })\n            .then(data => {\n                if (data.error) {\n                    throw new Error('Error from server: ' + data.error);\n                }\n                // console.log('Prediction: ' + data.prediction);\n                alert(`Predicted: ${data.prediction}`);\n\n            })\n            .catch((error) => {\n                console.error('Error:', error);\n                console.log('Error: Could not retrieve prediction. ' + error.message);\n            });\n            fetchImages();\n            // setError('');\n        } catch (error) {\n            // setError('Error uploading the image');\n            console.error('Upload image error:', error.response);\n        }\n        // setIsLoading(false);\n    };\n\n    const handleAnalyze = async (image) => {\n        if (!image.base64Image) {\n            alert('Please select a file and convert it to base64 first!');\n            return;\n        }\n\n        try {\n            const response = await fetch('http://127.0.0.1:5000/predict', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify({ image: image.base64Image }),\n            });\n\n            const result = await response.json();\n            // console.log(result);\n            alert(`Predicted: ${result.prediction}`);\n        } catch (error) {\n            console.error('Error:', error);\n        }\n    };\n\n    const handleCommentSubmit = async (imageId, comment) => {\n        // setIsLoading(true);\n        try {\n            await axios.post(`http://localhost:5001/api/user/images/${imageId}/comments`, { text: comment, userId: '661f1c830c9e0aaacf0b5bce'});\n            fetchImages();\n            // setError('');\n        } catch (error) {\n            // setError('Error posting comment');\n            console.error('Post comment error:', error.response);\n        }\n        // setIsLoading(false);\n    };\n\n    // if (isLoading) return <p>Loading...</p>;\n    // if (error) return <p>{error}</p>;\n\n    return (\n        <Layout>\n        <div className=\"lay\">\n            <h1 style={{ textAlign: 'center' }}>Dashboard</h1>\n            <input type=\"file\" onChange={handleFileChange} id=\"image\" name='image' />\n            <button onClick={handleUpload} style={{ margin: '10px' }}>Upload Image</button>\n            {isLoading && <p>Loading...</p>}\n            {images.map((image) => (\n                <div key={image._id} style={{ border: '5px solid #ccc', padding: '20px', marginBottom: '10px' }}>\n                    <img src={image.base64Image} alt=\"Uploaded\" style={{ width:'500px',height:'500px', marginBottom: '10px', border:'2px solid black' }} />\n                    <button onClick={() => handleAnalyze(image)} style={{ margin: '10px' }}>Analyze Image</button>\n                    <div style={{border:'2px solid black'}}>\n                        <h3 style={{marginLeft:'700px'}}>Comments</h3>\n                        {image.comments.map((comment) => (\n                            <p key={comment._id} style={{ backgroundColor: '#f8f8f8',marginLeft:'700px', borderRadius: '5px',minWidth:'100px',maxWidth:'500px'}}>\n                                {comment.body}\n                            </p>\n                        ))}\n                        <CommentForm imageId={image._id} onCommentSubmit={handleCommentSubmit} />\n                    </div>\n                </div>\n            ))}\n        </div>\n        </Layout>\n    );\n}\n\nfunction CommentForm({ imageId, onCommentSubmit }) {\n    const [comment, setComment] = useState('');\n\n    const handleSubmit = (e) => {\n        e.preventDefault();\n        onCommentSubmit(imageId, comment);\n        setComment('');\n    };\n\n    return (\n        <div>\n        <form onSubmit={handleSubmit} style={{ display: 'flex', marginTop: '10px', width:'500px', border:'2px solid black'}}>\n            <input type=\"text\" value={comment} onChange={(e) => setComment(e.target.value)} placeholder=\"Add a comment...\" style={{ flexGrow: 1, marginRight: '5px',maxLength:'100' }} />\n            <button type=\"submit\">Post</button>\n        </form>\n        </div>\n    );\n}\n\nexport default Dashboard;"],"mappings":";;;AAAA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAGA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,MAAM,MAAM,kBAAkB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEtC,SAASC,SAASA,CAAA,EAAG;EAAAC,EAAA;EACjB,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAG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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}